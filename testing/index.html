<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Booking | The Cloud Forest Retreat</title>
  <meta name="description" content="Request availability at The Cloud Forest Retreat outside of Quito, Ecuador. Share your dates and preferences and we will reply with availability and next steps." />
  <meta name="robots" content="index,follow" />
  <link rel="canonical" href="https://thecloudforestretreat.com/booking/" />

  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="The Cloud Forest Retreat" />
  <meta property="og:title" content="Booking | The Cloud Forest Retreat" />
  <meta property="og:description" content="Request availability at The Cloud Forest Retreat outside of Quito, Ecuador. Share your dates and preferences and we will reply with availability and next steps." />
  <meta property="og:url" content="https://thecloudforestretreat.com/booking/" />
  <meta property="og:image" content="https://thecloudforestretreat.com/og-tcfr.jpg" />
  <meta property="og:image:secure_url" content="https://thecloudforestretreat.com/og-tcfr.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="The Cloud Forest Retreat in Ecuador" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Booking | The Cloud Forest Retreat" />
  <meta name="twitter:description" content="Request availability at The Cloud Forest Retreat outside of Quito, Ecuador. Share your dates and preferences and we will reply with availability and next steps." />
  <meta name="twitter:image" content="https://thecloudforestretreat.com/og-tcfr.jpg" />

  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="theme-color" content="#0D5925" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800;900&family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="/assets/css/site.css" />
  <link rel="stylesheet" href="/assets/css/header.css" />
  <script src="/assets/js/head.js" defer></script>

  <style>
    :root{
      --max: 1120px;
      --r: 24px;
      --shadow: 0 18px 55px rgba(13,89,37,0.16);
      --line: rgba(11,26,16,0.12);
      --forest: #0D5925;
      --forest2: #0B2B12;
      --orange: #E0643A;
      --glass: rgba(245,245,220,0.78);
      --glass2: rgba(245,245,220,0.62);
      --ink: #0b1a10;
      --muted: rgba(11,26,16,0.72);
    }

    *{ box-sizing: border-box; }
    body{ margin: 0; }

    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 18px 18px 76px;
    }

    .card{
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: var(--glass2);
      box-shadow: var(--shadow);
      overflow: hidden;
      color: var(--ink);
      min-width: 0;
    }

    .hero{
      margin-top: 14px;
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      background: var(--glass);
      overflow: hidden;
      position: relative;
      color: var(--ink);
    }

    .heroMedia{
      position: relative;
      height: clamp(320px, 42vh, 520px);
      background: rgba(0,0,0,0.10);
    }

    .heroMedia img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center 58%;
      display: block;
      transform: scale(1.01);
    }

    .heroOverlay{
      position: absolute;
      inset: 0;
      background:
        radial-gradient(980px 520px at 18% 14%, rgba(224,100,58,0.22), rgba(0,0,0,0) 60%),
        linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.44));
      pointer-events: none;
    }

    .heroInner{
      position: absolute;
      left: 14px;
      right: 14px;
      bottom: 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.22);
      background: rgba(0,0,0,0.30);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 14px;
      color: rgba(255,255,255,0.96);
      box-shadow: 0 18px 55px rgba(0,0,0,0.20);
      max-width: 860px;
    }

    .kicker{
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-weight: 900;
      letter-spacing: 0.10em;
      text-transform: uppercase;
      font-size: 12px;
      color: rgba(231,228,209,0.94);
    }

    .heroH1{
      margin: 10px 0 8px;
      font-family: var(--font-head);
      font-weight: 900;
      letter-spacing: -0.03em;
      line-height: 1.02;
      font-size: clamp(32px, 4.2vw, 52px);
      color: #fff;
      text-shadow: 0 14px 40px rgba(0,0,0,0.34);
    }

    .heroP{
      margin: 0;
      color: rgba(231,228,209,0.94);
      font-size: 15.8px;
      line-height: 1.75;
      font-weight: 650;
      text-shadow: 0 10px 26px rgba(0,0,0,0.18);
      max-width: 92ch;
    }

    .grid{
      margin-top: 14px;
      display: grid;
      grid-template-columns: 1.12fr 0.88fr;
      gap: 14px;
      align-items: start;
    }

    .pad{ padding: 14px; }

    .h2{
      margin: 0 0 10px;
      font-family: var(--font-head);
      color: var(--forest);
      letter-spacing: -0.02em;
      font-weight: 900;
      font-size: 22px;
      line-height: 1.08;
    }

    .hint{
      margin: 0 0 12px;
      color: var(--muted);
      font-weight: 650;
      line-height: 1.7;
      font-size: 14.6px;
    }

    .otaBlock{
      margin-top: 12px;
      border-radius: 18px;
      border: 1px solid rgba(11,26,16,0.10);
      background: rgba(255,255,255,0.55);
      padding: 12px;
      display: grid;
      gap: 10px;
    }

    .otaTitle{
      margin: 0;
      font-family: var(--font-head);
      color: var(--forest);
      letter-spacing: -0.02em;
      font-weight: 900;
      font-size: 18px;
      line-height: 1.15;
    }

    .otaHint{
      margin: 0;
      color: rgba(11,26,16,0.72);
      font-weight: 650;
      line-height: 1.7;
      font-size: 14px;
    }

    .otaControls{
      display: grid;
      grid-template-columns: 1fr;
      gap: 6px;
      max-width: 360px;
    }

    .otaGrid{
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      align-items: stretch;
    }

    .otaBtn{
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(13,89,37,0.16);
      background: rgba(245,245,220,0.78);
      box-shadow: 0 10px 22px rgba(13,89,37,0.10);
      text-decoration: none;
      cursor: pointer;
      min-height: 56px;
    }

    .otaBtn:hover{ transform: translateY(-1px); }

    .otaBtn:focus{
      outline: none;
      box-shadow: 0 0 0 4px rgba(224,100,58,0.18);
      border-color: rgba(224,100,58,0.45);
    }

    .otaBtn img{
      max-width: 120px;
      width: 100%;
      height: auto;
      display: block;
    }

    .otaBtn.is-disabled{
      opacity: 0.55;
      cursor: not-allowed;
      pointer-events: none;
    }

    .otaNote{
      margin: 0;
      color: rgba(11,26,16,0.68);
      font-weight: 650;
      line-height: 1.6;
      font-size: 13px;
      max-width: 92ch;
    }

    .formGrid{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .field{ min-width: 0; }
    .full{ grid-column: 1 / -1; }

    label{
      display: block;
      font-weight: 900;
      color: var(--forest2);
      font-size: 13px;
      margin: 0 0 6px;
    }

    input, select, textarea{
      width: 100%;
      font-family: inherit;
      font-size: 14px;
      border-radius: 14px;
      border: 1px solid rgba(13,89,37,0.16);
      background: rgba(255,255,255,0.62);
      padding: 12px 12px;
      color: var(--ink);
      outline: none;
    }

    select{ padding-right: 40px; }

    textarea{
      min-height: 120px;
      resize: vertical;
    }

    input:focus, select:focus, textarea:focus{
      box-shadow: 0 0 0 4px rgba(224,100,58,0.18);
      border-color: rgba(224,100,58,0.45);
    }

    .req{
      color: rgba(224,100,58,0.95);
      font-weight: 900;
      margin-left: 4px;
    }

    .actionsRow{
      margin-top: 12px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
    }

    .miniNote{
      margin: 0;
      color: rgba(11,26,16,0.68);
      font-weight: 650;
      font-size: 13px;
      line-height: 1.6;
      max-width: 72ch;
    }

    .submitBtn{
      appearance: none;
      border: 1px solid rgba(0,0,0,0.08);
      background: #E0643A;
      color: #fff;
      border-radius: 999px;
      padding: 12px 16px;
      font-weight: 900;
      cursor: pointer;
      box-shadow: 0 14px 30px rgba(224,100,58,0.22);
      min-width: 180px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      white-space: nowrap;
    }

    .submitBtn[disabled]{ opacity: 0.7; cursor: not-allowed; }

    .sideStack{
      display: grid;
      gap: 14px;
      align-items: start;
    }

    .sideCard{
      padding: 14px;
      position: relative;
      overflow: hidden;
    }

    .sideCard:before{
      content:"";
      position:absolute;
      inset: -120px -120px auto auto;
      width: 320px;
      height: 320px;
      background: radial-gradient(circle at center, rgba(224,100,58,0.18), rgba(224,100,58,0) 62%);
      pointer-events:none;
    }

    .sideTitle{
      margin: 0 0 8px;
      font-family: var(--font-head);
      font-weight: 900;
      letter-spacing: -0.02em;
      font-size: 20px;
      line-height: 1.1;
      color: var(--forest);
      position: relative;
    }

    .sideP{
      margin: 0;
      color: rgba(11,26,16,0.78);
      line-height: 1.75;
      font-weight: 650;
      font-size: 14.6px;
      position: relative;
    }

    .statusCard{
      padding: 14px;
      display: none;
    }
    .statusCard.show{ display: block; }

    .statusTitle{
      margin: 0 0 6px;
      font-family: var(--font-head);
      font-weight: 900;
      letter-spacing: -0.02em;
      font-size: 20px;
      color: var(--forest);
    }

    .statusText{
      margin: 0;
      color: rgba(11,26,16,0.78);
      line-height: 1.75;
      font-weight: 650;
      font-size: 14.6px;
    }

    .sideImageCard{ padding: 14px; }

    .sideImageFrame{
      position: relative;
      width: 100%;
      aspect-ratio: 3 / 4;
      overflow: hidden;
      border-radius: 18px;
      border: 1px solid rgba(11,26,16,0.10);
      background: #ccc;
      box-shadow: var(--shadow);
    }

    .sideImageFrame img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center 50%;
      display: block;
      transform: scale(1.01);
    }

    .sideImageFrame::after{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.26));
      pointer-events:none;
    }

    .sideImageCaption{
      position: absolute;
      left: 12px;
      right: 12px;
      bottom: 12px;
      color: rgba(255,255,255,0.96);
      font-weight: 900;
      letter-spacing: -0.02em;
      line-height: 1.2;
      text-shadow: 0 14px 40px rgba(0,0,0,0.40);
      font-size: 13.5px;
      z-index: 1;
    }

    .dateRow{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .dateHint{
      margin: 6px 0 0;
      color: rgba(11,26,16,0.62);
      font-weight: 650;
      font-size: 12.6px;
      line-height: 1.5;
    }

    @media (max-width: 900px){
      .wrap{ padding: 12px 14px 64px; }
      .heroMedia{ height: clamp(240px, 34vh, 340px); }
      .heroMedia img{ object-position: center 62%; }
      .heroInner{ left: 12px; right: 12px; bottom: 12px; padding: 12px; max-width: none; }
      .grid{ grid-template-columns: 1fr; }
      .formGrid{ grid-template-columns: 1fr; }
      .dateRow{ grid-template-columns: 1fr 1fr; }
      .submitBtn{ width: 100%; }
      .actionsRow{ gap: 12px; }
      .sideImageFrame{ aspect-ratio: 16 / 10; }
    }

    .gReviews{
      padding: 14px;
      position: relative;
      overflow: hidden;
    }
    .gReviews:before{
      content:"";
      position:absolute;
      inset: -140px -140px auto auto;
      width: 360px;
      height: 360px;
      background: radial-gradient(circle at center, rgba(224,100,58,0.16), rgba(224,100,58,0) 62%);
      pointer-events:none;
    }
    .gHead{
      position: relative;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }
    .gTitle{
      margin: 0;
      font-family: var(--font-head);
      font-weight: 900;
      letter-spacing: -0.02em;
      font-size: 20px;
      line-height: 1.1;
      color: var(--forest);
    }
    .gSub{
      margin: 0;
      color: rgba(11,26,16,0.72);
      font-weight: 650;
      line-height: 1.7;
      font-size: 14.4px;
      position: relative;
    }
    .gBadge{
      position: relative;
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(11,26,16,0.10);
      background: rgba(255,255,255,0.55);
    }
    .gLogo{
      width: 28px;
      height: 28px;
      display:block;
    }
    .gScoreRow{
      display:flex;
      align-items:center;
      gap: 8px;
      flex-wrap: wrap;
      font-weight: 900;
      color: rgba(11,26,16,0.86);
      font-size: 14px;
    }
    .gStars{
      color: #FBBC05;
      letter-spacing: 1px;
      font-size: 14.5px;
    }
    .gCount{
      font-weight: 800;
      color: rgba(11,26,16,0.62);
    }
    .gActions{
      position: relative;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .gBtn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 900;
      border: 1px solid rgba(13,89,37,0.18);
      line-height: 1;
      text-decoration: none;
      box-shadow: 0 14px 30px rgba(0,0,0,0.10);
      white-space: nowrap;
    }
    .gBtn.outline{
      background: rgba(255,255,255,0.64);
      color: var(--forest2);
    }
    .gBtn.primary{
      background: #E0643A;
      color:#fff;
      border-color: rgba(0,0,0,0.08);
      box-shadow: 0 14px 30px rgba(224,100,58,0.22);
    }
    .gQuotes{
      position: relative;
      display:grid;
      gap: 10px;
      margin-top: 12px;
    }
    .gQuote{
      border-radius: 16px;
      border: 1px solid rgba(11,26,16,0.10);
      background: rgba(245,245,220,0.78);
      padding: 12px;
    }
    .gQuoteText{
      margin: 0;
      color: rgba(11,26,16,0.80);
      font-weight: 650;
      font-size: 14.4px;
      line-height: 1.7;
    }
    .gQuoteMeta{
      margin: 8px 0 0;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: rgba(11,26,16,0.70);
      font-weight: 900;
      font-size: 12.6px;
    }
    .gQuoteStars{
      color: #FBBC05;
      letter-spacing: 1px;
      font-size: 13px;
      line-height: 1;
    }
    .gQuoteName{ color: rgba(11,26,16,0.72); }

    @media (max-width: 900px){
      .gActions{
        display:grid;
        grid-template-columns: 1fr 1fr;
      }
      .gBtn{ width: 100%; }
    }
  </style>

  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>

<body>
  <div id="siteHeader"></div>

  <main class="wrap" aria-label="Booking page">
    <section class="hero" aria-label="Booking hero">
      <div class="heroMedia" aria-label="Hero image">
        <img src="/assets/images/pages/tcfr_booking_hero.jpg" alt="The Cloud Forest Retreat view" loading="eager" decoding="async" />
        <div class="heroOverlay" aria-hidden="true"></div>
        <div class="heroInner">
          <div class="kicker">Request availability</div>
          <h1 class="heroH1">Book Your Stay</h1>
          <p class="heroP">
            Share your preferred travel dates, group size, and room preference. We will follow up quickly with availability and next steps.
            If needed, we can also help arrange ground transportation from Quito or the airport.
          </p>
        </div>
      </div>
    </section>

    <section class="grid" aria-label="Booking form and details">
      <section class="card pad" aria-label="Booking request form">
        <h2 class="h2">Booking Request</h2>
        <p class="hint">
          This form emails our team and sends you a confirmation. Fields marked with an asterisk are required.
        </p>

        <div class="otaBlock" aria-label="Instant booking on partner sites">
          <h3 class="otaTitle">Book instantly on a booking site</h3>
          <p class="otaHint">
            Choose a stay type, then pick a site. If you prefer, you can still send a direct booking request using the form below.
          </p>

          <div class="otaControls" aria-label="Stay type selection">
            <label for="ota_room">Stay type</label>
            <select id="ota_room" name="ota_room">
              <option value="Entire house">Entire house</option>
              <option value="Panoramic Suite">Panoramic Suite</option>
              <option value="Sunrise Room">Sunrise Room</option>
              <option value="Sunset Room">Sunset Room</option>
            </select>
          </div>

          <div class="otaGrid" aria-label="Booking site links">
            <a class="otaBtn" id="ota_airbnb" href="#" target="_blank" rel="noopener noreferrer" aria-label="Book on Airbnb">
              <img src="/assets/images/pages/booking/tcfr_booking_airbnb.png" alt="Airbnb" loading="lazy" decoding="async" />
            </a>
            <a class="otaBtn" id="ota_vrbo" href="#" target="_blank" rel="noopener noreferrer" aria-label="Book on Vrbo">
              <img src="/assets/images/pages/booking/tcfr_booking_vrbo.png" alt="Vrbo" loading="lazy" decoding="async" />
            </a>
            <a class="otaBtn" id="ota_expedia" href="#" target="_blank" rel="noopener noreferrer" aria-label="Book on Expedia">
              <img src="/assets/images/pages/booking/tcfr_booking_expedia.png" alt="Expedia" loading="lazy" decoding="async" />
            </a>
            <a class="otaBtn is-disabled" id="ota_booking" href="#" aria-label="Book on Booking.com (coming soon)" aria-disabled="true">
              <img src="/assets/images/pages/booking/tcfr_booking_booking.png" alt="Booking.com" loading="lazy" decoding="async" />
            </a>
          </div>

          <p class="otaNote">
            On these sites we list the entire house and each room separately, so you can book the stay type that matches your trip.
          </p>
        </div>

        <form id="tcfrBookingForm" method="post" action="javascript:void(0);" aria-label="Booking form" onsubmit="return false;">
          <input type="hidden" id="source_page" name="source_page" value="">
          <input type="hidden" id="user_agent" name="user_agent" value="">
          <input type="hidden" id="dates_of_visit" name="dates_of_visit" value="">

          <div class="formGrid">
            <div class="field">
              <label for="first_name">First name <span class="req">*</span></label>
              <input id="first_name" name="first_name" type="text" autocomplete="given-name" required placeholder="First name" autocapitalize="words" inputmode="text" spellcheck="false" />
            </div>

            <div class="field">
              <label for="last_name">Last name <span class="req">*</span></label>
              <input id="last_name" name="last_name" type="text" autocomplete="family-name" required placeholder="Last name" autocapitalize="words" inputmode="text" spellcheck="false" />
            </div>

            <div class="field">
              <label for="email">Email <span class="req">*</span></label>
              <input id="email" name="email" type="email" autocomplete="email" required placeholder="you@example.com" />
            </div>

            <div class="field">
              <label for="phone_number">Phone number <span class="req">*</span></label>
              <input id="phone_number" name="phone_number" type="tel" autocomplete="tel" required placeholder="Country code + phone number" inputmode="tel" />
            </div>

            <div class="field full" aria-label="Dates of visit">
              <div style="display:flex;align-items:flex-end;justify-content:space-between;gap:12px;flex-wrap:wrap;">
                <label style="margin:0;">Dates of visit <span class="req">*</span></label>
                <span style="font-size:12.6px;font-weight:800;color:rgba(11,26,16,0.62);">YYYY-MM-DD to YYYY-MM-DD</span>
              </div>
              <div class="dateRow" style="margin-top:6px;">
                <div class="field" style="margin:0;">
                  <input id="date_start" name="date_start" type="date" required aria-label="Start date" />
                </div>
                <div class="field" style="margin:0;">
                  <input id="date_end" name="date_end" type="date" required aria-label="End date" />
                </div>
              </div>
              <p class="dateHint">Select a start date and an optional end date. If your stay is one day, pick the same date for both.</p>
            </div>

            <div class="field">
              <label for="number_of_days_interested">Number of days interested</label>
              <input id="number_of_days_interested" name="number_of_days_interested" type="text" inputmode="numeric" placeholder="Example: 2 nights" />
            </div>

            <div class="field">
              <label for="number_of_guests">Number of guests</label>
              <input id="number_of_guests" name="number_of_guests" type="text" inputmode="numeric" placeholder="Example: 2 adults" />
            </div>

            <div class="field">
              <label for="room_preference">Room preference</label>
              <select id="room_preference" name="room_preference">
                <option value="">Select a room</option>
                <option value="Panoramic Suite">Panoramic Suite</option>
                <option value="Sunrise Room">Sunrise Room</option>
                <option value="Sunset Room">Sunset Room</option>
                <option value="Entire house">Entire house</option>
              </select>
            </div>

            <div class="field">
              <label for="transportation_needed">Transportation needed (Quito/airport)</label>
              <select id="transportation_needed" name="transportation_needed">
                <option value="">Select</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
              </select>
            </div>

            <div class="field full">
              <label for="how_did_you_hear_about_us">How did you hear about us?</label>
              <select id="how_did_you_hear_about_us" name="how_did_you_hear_about_us">
                <option value="">Select</option>
                <option value="Referral">Referral</option>
                <option value="Instagram">Instagram</option>
                <option value="TikTok">TikTok</option>
                <option value="YouTube">YouTube</option>
                <option value="Google Search">Google Search</option>
                <option value="Google Maps">Google Maps</option>
                <option value="Airbnb">Airbnb</option>
                <option value="Vrbo">Vrbo</option>
                <option value="Booking.com">Booking.com</option>
                <option value="Other">Other</option>
              </select>
            </div>

            <div class="field full">
              <label for="message">Message <span class="req">*</span></label>
              <textarea id="message" name="message" required placeholder="Share your goals, your ideal pace, and any timing notes."></textarea>
            </div>
          </div>

          <div class="actionsRow">
            <p class="miniNote">
              By submitting, you agree we may contact you by email or phone to confirm details.
            </p>
            <div class="cf-turnstile" data-sitekey="0x4AAAAAACauNy6DfCUnIJhS"></div>
            <button id="tcfrSubmitBtn" class="submitBtn" type="button">Send Request</button>
          </div>
        </form>
      </section>

      <aside class="sideStack" aria-label="Booking details (right column)">
        <section id="tcfrStatusCard" class="card statusCard" aria-label="Submission status">
          <h3 class="statusTitle">Request sent</h3>
          <p class="statusText">
            Thank you. We received your booking inquiry and sent a confirmation email.
            If you do not see it, please check your spam or promotions folder.
          </p>
        </section>

        <section class="card sideCard" aria-label="What happens next">
          <h3 class="sideTitle">What happens next</h3>
          <p class="sideP">
            We will reply with availability, pricing, and any recommendations to make your stay effortless.
            If you selected transportation, we will include pickup options from Quito or the airport.
          </p>
        </section>

        <section class="card sideCard" aria-label="Getting here">
          <h3 class="sideTitle">Getting here</h3>
          <p class="sideP">
            Located about 2 hours from Quito. We can help coordinate transportation for a smooth arrival.
          </p>
        </section>

        <section class="card gReviews" aria-label="Guest reviews">
          <div class="gHead">
            <div>
              <h3 class="gTitle">Guests love their stay</h3>
              <p class="gSub">A few recent Google review highlights. Want the full list or to leave your own?</p>
            </div>
            <div class="gBadge" aria-label="Google rating">
              <img class="gLogo" src="/assets/images/icons/tcfr_logo_google_reviews.png" alt="Google Reviews" loading="lazy" decoding="async" />
              <div class="gScoreRow">
                <span>5.0</span>
                <span class="gStars" aria-label="5 out of 5 stars">★★★★★</span>
                <span class="gCount">(9 reviews)</span>
              </div>
            </div>
          </div>

          <div class="gActions" aria-label="Review actions">
            <a class="gBtn outline" href="https://g.page/r/CQq5wBqKgv0DEAE" target="_blank" rel="noopener">Read reviews</a>
            <a class="gBtn primary" href="https://g.page/r/CQq5wBqKgv0DEAE/review" target="_blank" rel="noopener">Write a review</a>
          </div>

          <div class="gQuotes" aria-label="Review excerpts">
            <div class="gQuote">
              <p class="gQuoteText">"Fantastic place to disconnect and get in touch with nature. This unique experience can be as customized as you want."</p>
              <p class="gQuoteMeta"><span class="gQuoteStars" aria-hidden="true">★★★★★</span><span class="gQuoteName">V Arguello</span></p>
            </div>
            <div class="gQuote">
              <p class="gQuoteText">"Absolutely magical experience at the cloud forest retreat. The views are incredible. The hosts are attentive, friendly, and welcoming."</p>
              <p class="gQuoteMeta"><span class="gQuoteStars" aria-hidden="true">★★★★★</span><span class="gQuoteName">Abigail Martin</span></p>
            </div>
            <div class="gQuote">
              <p class="gQuoteText">"Beautiful accommodations and meals with a lovely host and views that cannot be beat, highly recommend."</p>
              <p class="gQuoteMeta"><span class="gQuoteStars" aria-hidden="true">★★★★★</span><span class="gQuoteName">Pauline Witzke</span></p>
            </div>
          </div>
        </section>

        <section class="card sideImageCard" aria-label="Booking image placeholder">
          <div class="sideImageFrame">
            <img src="/assets/images/pages/tcfr_booking_01.jpg" alt="The Cloud Forest Retreat view" loading="lazy" decoding="async" />
            <div class="sideImageCaption">A calm place to reset in the cloud forest</div>
          </div>
        </section>
      </aside>
    </section>
  </main>

  <div id="siteFooter"></div>

  <script src="/assets/js/site.js?v=3"></script>
  <script>
    (function(){
      "use strict";

      var API_ENDPOINT = "/api/booking";

      var OTA_LINKS = {
        "Entire house": {
          "airbnb": "https://airbnb.com/h/thecloudforestretreat-entire",
          "vrbo": "https://www.vrbo.com/en-au/holiday-rental/p4506928vb?dateless=true&x_pwa=1&rfrr=HSR&pwa_ts=1769454869987&referrerUrl=aHR0cHM6Ly93d3cudnJiby5jb20vSG90ZWwtU2VhcmNo&useRewards=false&adults=2&regionId=3000388018&destination=Calacali%2C+Pichincha%2C+Ecuador&destType=MARKET&latLong=-0.001291%2C-78.51387&searchId=ea67ea52-0c68-4544-a28a-1061e36034cb&sort=RECOMMENDED&userIntent=&expediaPropertyId=114399386",
          "expedia": "https://www.expedia.com/Quito-Hotels-Stay-In-A-UNESCO-Biosphere-Reserve-Nature.h114399386.Hotel-Information",
          "booking": ""
        },
        "Panoramic Suite": {
          "airbnb": "https://airbnb.com/h/thecloudforestretreat-panoramic-suite",
          "vrbo": "https://www.vrbo.com/en-au/holiday-rental/p4522305vb",
          "expedia": "https://www.expedia.com/Quito-Hotels-Luxurious-Panoramic-Suite-At-The-Cloud-Forest-Retreat-W-Views-Modern-Comforts.h114674195.Hotel-Information",
          "booking": ""
        },
        "Sunrise Room": {
          "airbnb": "https://airbnb.com/h/thecloudforestreatreat-sunrise-room",
          "vrbo": "https://www.vrbo.com/en-gb/p4522358vb",
          "expedia": "https://www.expedia.com/Quito-Hotels-Sunrise-Room-At-The-Cloud-Forest-Retreat.h114675896.Hotel-Information",
          "booking": ""
        },
        "Sunset Room": {
          "airbnb": "https://airbnb.com/h/thecloudforestreatreat-sunset-room",
          "vrbo": "https://www.vrbo.com/en-au/holiday-rental/p4522308vb?dateless=true&x_pwa=1&rfrr=HSR&pwa_ts=1769454870000&referrerUrl=aHR0cHM6Ly93d3cudnJiby5jb20vSG90ZWwtU2VhcmNo&useRewards=false&adults=2&regionId=3000388018&destination=Calacali%2C+Pichincha%2C+Ecuador&destType=MARKET&latLong=-0.001291%2C-78.51387&searchId=ea67ea52-0c68-4544-a28a-1061e36034cb&sort=RECOMMENDED&userIntent=&expediaPropertyId=114674265",
          "expedia": "https://www.expedia.com/Quito-Hotels-Sunset-Room-At-The-Cloud-Forest-Retreat.h114674265.Hotel-Information",
          "booking": ""
        }
      };

      function setBtnHref(btn, href){
        if (!btn) return;
        if (href){
          btn.href = href;
          btn.classList.remove("is-disabled");
          btn.removeAttribute("aria-disabled");
          btn.setAttribute("target", "_blank");
          btn.setAttribute("rel", "noopener noreferrer");
        } else {
          btn.href = "#";
          btn.classList.add("is-disabled");
          btn.setAttribute("aria-disabled", "true");
          btn.removeAttribute("target");
          btn.removeAttribute("rel");
        }
      }

      function updateOtas(stayType){
        var map = OTA_LINKS[stayType] || OTA_LINKS["Entire house"];
        setBtnHref(document.getElementById("ota_airbnb"), map.airbnb);
        setBtnHref(document.getElementById("ota_vrbo"), map.vrbo);
        setBtnHref(document.getElementById("ota_expedia"), map.expedia);
        setBtnHref(document.getElementById("ota_booking"), map.booking);
      }

      function normalizeStayType(v){
        var s = String(v || "").trim();
        if (!s) return "Entire house";
        if (s === "Entire house") return s;
        if (s === "Panoramic Suite") return s;
        if (s === "Sunrise Room") return s;
        if (s === "Sunset Room") return s;
        return "Entire house";
      }

      var otaRoom = document.getElementById("ota_room");
      var roomPref = document.getElementById("room_preference");

      function syncFromRoomPreference(){
        if (!roomPref || !otaRoom) return;
        var v = normalizeStayType(roomPref.value || "Entire house");
        otaRoom.value = v;
        updateOtas(v);
      }

      function syncFromOtaSelector(){
        if (!otaRoom || !roomPref) return;
        var v = normalizeStayType(otaRoom.value || "Entire house");
        otaRoom.value = v;
        roomPref.value = v;
        updateOtas(v);
      }

      if (otaRoom) otaRoom.addEventListener("change", syncFromOtaSelector);
      if (roomPref) roomPref.addEventListener("change", syncFromRoomPreference);

      if (roomPref && roomPref.value){
        syncFromRoomPreference();
      } else {
        if (otaRoom) otaRoom.value = "Entire house";
        updateOtas("Entire house");
      }

      function toTitleCase(s){
        var t = String(s || "").trim();
        if (!t) return "";
        t = t.toLowerCase().replace(/\s+/g, " ");
        var parts = t.split(" ");
        for (var i = 0; i < parts.length; i++){
          var w = parts[i];
          if (!w) continue;
          var hy = w.split("-");
          for (var j = 0; j < hy.length; j++){
            var seg = hy[j];
            if (!seg) continue;
            hy[j] = seg.charAt(0).toUpperCase() + seg.slice(1);
          }
          parts[i] = hy.join("-");
        }
        return parts.join(" ");
      }

      function formatDatesRange(start, end){
        var s = String(start || "").trim();
        var e = String(end || "").trim();
        if (!s && !e) return "";
        if (s && !e) return s + " to " + s;
        if (!s && e) return e + " to " + e;
        return s + " to " + e;
      }

      var form = document.getElementById("tcfrBookingForm");
      var btn = document.getElementById("tcfrSubmitBtn");
      var statusCard = document.getElementById("tcfrStatusCard");

      var first = document.getElementById("first_name");
      var last = document.getElementById("last_name");
      var dateStart = document.getElementById("date_start");
      var dateEnd = document.getElementById("date_end");
      var datesOfVisit = document.getElementById("dates_of_visit");

      var sourcePage = document.getElementById("source_page");
      var userAgent = document.getElementById("user_agent");

      var isSending = false;

      function bindTitleCase(el){
        if (!el) return;
        el.addEventListener("blur", function(){ el.value = toTitleCase(el.value); });
        el.addEventListener("change", function(){ el.value = toTitleCase(el.value); });
      }
      bindTitleCase(first);
      bindTitleCase(last);

      function syncDatesHidden(){
        if (!datesOfVisit) return;
        var v = formatDatesRange(dateStart ? dateStart.value : "", dateEnd ? dateEnd.value : "");
        datesOfVisit.value = v;
      }
      if (dateStart) dateStart.addEventListener("change", syncDatesHidden);
      if (dateEnd) dateEnd.addEventListener("change", syncDatesHidden);

      function setSending(sending){
        isSending = sending;
        if (!btn) return;
        btn.disabled = sending;
        btn.textContent = sending ? "Sending..." : "Send Request";
      }

      function showSuccess(){
        if (!statusCard) return;
        statusCard.classList.add("show");
        statusCard.querySelector(".statusTitle").textContent = "Success";
        statusCard.querySelector(".statusText").textContent = "Thank you. We received your booking request and sent a confirmation email. If you do not see it, please check Spam or Promotions.";
        statusCard.scrollIntoView({ behavior: "smooth", block: "start" });
      }

      function showError(msg){
        if (!statusCard) return;
        statusCard.classList.add("show");
        statusCard.querySelector(".statusTitle").textContent = "Please check the form";
        statusCard.querySelector(".statusText").textContent = msg || "Please try again in a moment.";
        statusCard.scrollIntoView({ behavior: "smooth", block: "start" });
      }

      async function submitBooking(){
        if (!form || !btn || !statusCard) return;
        if (isSending) return;

        if (first) first.value = toTitleCase(first.value);
        if (last) last.value = toTitleCase(last.value);

        if (sourcePage) sourcePage.value = window.location.pathname;
        if (userAgent) userAgent.value = navigator.userAgent;

        syncDatesHidden();

        var fd = new FormData(form);

        var required = [
          "first_name",
          "last_name",
          "email",
          "phone_number",
          "message",
          "dates_of_visit"
        ];

        for (var i = 0; i < required.length; i++){
          var key = required[i];
          var val = String(fd.get(key) || "").trim();
          if (!val){
            if (key === "dates_of_visit") {
              showError("Please select your dates of visit.");
            } else {
              showError("Please fill out all required fields.");
            }
            return;
          }
        }

        var tsToken = String(fd.get("cf-turnstile-response") || "").trim();
        if (!tsToken){
          showError("Please complete the security check and try again.");
          return;
        }

        setSending(true);

        try {
          var res = await fetch(API_ENDPOINT, { method: "POST", body: fd });

          var json = null;
          try { json = await res.json(); } catch (e) { json = null; }

          if (!res.ok || !json || !json.ok){
            var msg = (json && (json.message || json.error)) ? (json.message || json.error) : "We could not submit your request. Please try again.";
            throw new Error(msg);
          }

          showSuccess();

          form.reset();

          if (sourcePage) sourcePage.value = window.location.pathname;
          if (userAgent) userAgent.value = navigator.userAgent;
          if (datesOfVisit) datesOfVisit.value = "";

          if (window.turnstile){
            try { window.turnstile.reset(); } catch (e2) {}
          }
        } catch (err) {
          showError(err && err.message ? err.message : "We could not submit your request. Please try again.");
        } finally {
          setSending(false);
        }
      }

      if (btn) btn.addEventListener("click", submitBooking);

      if (form){
        form.addEventListener("keydown", function(ev){
          if (ev.key === "Enter" && ev.target && ev.target.tagName !== "TEXTAREA"){
            ev.preventDefault();
            submitBooking();
          }
        });
      }

      if (sourcePage) sourcePage.value = window.location.pathname;
      if (userAgent) userAgent.value = navigator.userAgent;

    })();
  </script>
</body>
</html>
