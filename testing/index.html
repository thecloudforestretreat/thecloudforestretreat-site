<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pululahua | Excursion a una caldera volcanica cerca de Quito | The Cloud Forest Retreat</title>
  <meta name="description" content="Descubre Pululahua, una de las raras calderas volcanicas habitadas del mundo, cerca de Quito. Que ver, mejores miradores, caminatas cortas, vida silvestre y como visitarla desde The Cloud Forest Retreat." />
  <meta name="robots" content="index,follow" />
  <!-- Canonical + hreflang (PRODUCTION URLs) -->
  <link rel="canonical" href="https://thecloudforestretreat.com/es/caracteristicas/pululahua/" />
  <link rel="alternate" hreflang="en" href="https://thecloudforestretreat.com/features/pululahua/" />
  <link rel="alternate" hreflang="es" href="https://thecloudforestretreat.com/es/caracteristicas/pululahua/" />
  <link rel="alternate" hreflang="x-default" href="https://thecloudforestretreat.com/features/pululahua/" />
  <!-- Open Graph (PRODUCTION URLs) -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="The Cloud Forest Retreat" />
  <meta property="og:title" content="Pululahua | Excursion a una caldera volcanica cerca de Quito" />
  <meta property="og:description" content="Descubre Pululahua, una de las raras calderas volcanicas habitadas del mundo, cerca de Quito. Que ver, mejores miradores, caminatas cortas, vida silvestre y como visitarla desde The Cloud Forest Retreat." />
  <meta property="og:url" content="https://thecloudforestretreat.com/es/caracteristicas/pululahua/" />
  <meta property="og:image" content="https://thecloudforestretreat.com/og-tcfr.jpg" />
  <meta property="og:image:secure_url" content="https://thecloudforestretreat.com/og-tcfr.jpg" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="The Cloud Forest Retreat vista de montana" />
  <!-- Twitter (PRODUCTION URLs) -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Pululahua | Excursion a una caldera volcanica cerca de Quito" />
  <meta name="twitter:description" content="Descubre Pululahua, una de las raras calderas volcanicas habitadas del mundo, cerca de Quito. Que ver, mejores miradores, caminatas cortas, vida silvestre y como visitarla desde The Cloud Forest Retreat." />
  <meta name="twitter:image" content="https://thecloudforestretreat.com/og-tcfr.jpg" />
  <!-- Favicons (approved root paths) -->
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="theme-color" content="#0D5925" />
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800;900&family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <!-- Global / shared CSS -->
  <link rel="stylesheet" href="/assets/css/site.css" />
  <link rel="stylesheet" href="/assets/css/header.css?v=3" />
  <!-- Head-only JS -->
  <script src="/assets/js/head.js?v=1" defer></script>
  <!-- Structured data: WebPage + Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Pululahua | Excursion a una caldera volcanica cerca de Quito",
    "description": "Descubre Pululahua, una de las raras calderas volcanicas habitadas del mundo, cerca de Quito. Que ver, mejores miradores, caminatas cortas, vida silvestre y como visitarla desde The Cloud Forest Retreat.",
    "url": "https://thecloudforestretreat.com/es/caracteristicas/pululahua/",
    "isPartOf": {
      "@type": "WebSite",
      "name": "The Cloud Forest Retreat",
      "url": "https://thecloudforestretreat.com/"
    }
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Inicio",
        "item": "https://thecloudforestretreat.com/es/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Caracteristicas",
        "item": "https://thecloudforestretreat.com/es/caracteristicas/"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "Pululahua",
        "item": "https://thecloudforestretreat.com/es/caracteristicas/pululahua/"
      }
    ]
  }
  </script>
  <style>
    :root{
      --max: 1120px;
      --r: 24px;
      --shadow: 0 18px 55px rgba(13,89,37,0.16);
      --line: rgba(11,26,16,0.12);
      --glass: rgba(245,245,220,0.78);
      --glass2: rgba(245,245,220,0.62);
      --ink: #0b1a10;
      --muted: rgba(11,26,16,0.72);
      --forest: #0D5925;
      --accent: #E0643A;
    }
    *{ box-sizing:border-box; }
    body{ margin:0; }

    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 18px 18px 76px;
    }

    .topBand{
      margin-top: 14px;
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      background: var(--glass);
      padding: 14px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
      color: var(--ink);
    }

    .crumbs{
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 800;
      font-size: 13px;
      color: rgba(11,26,16,0.75);
      flex-wrap: wrap;
    }
    .crumbs a{ color: inherit; text-decoration: none; }
    .crumbs a:hover{ text-decoration: underline; text-underline-offset: 3px; }

    .quickActions{
      display: inline-flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .card{
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: var(--glass2);
      box-shadow: var(--shadow);
      overflow: hidden;
      color: var(--ink);
      min-width: 0;
    }

    .cardHead{
      padding: 14px 14px 0;
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    .cardTitle{
      margin: 0;
      font-family: var(--font-head);
      color: var(--forest);
      letter-spacing: -0.02em;
      font-weight: 900;
      font-size: 20px;
      line-height: 1.1;
    }

    .cardHint{
      margin: 0;
      color: rgba(11,26,16,0.68);
      font-weight: 700;
      font-size: 13px;
      line-height: 1.4;
    }

    /* HERO */
    .hero{
      margin-top:14px;
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      background: var(--glass);
      overflow: hidden;
      position: relative;
      color: var(--ink);
    }

    .heroMedia{
      position: relative;
      height:400px;
      background: rgba(0,0,0,0.10);
    }

    .heroMedia img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transform: scale(1.01);
    }

    .heroShade{
      position: absolute;
      inset: 0;
      background:
        radial-gradient(980px 520px at 70% 18%, rgba(224,100,58,0.18), rgba(0,0,0,0) 58%),
        linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.50));
      pointer-events: none;
    }

    .heroInner{
      position: absolute;
      left: 14px;
      right: 14px;
      bottom: 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.22);
      background: rgba(0,0,0,0.30);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(6px);
      padding: 14px;
      color: rgba(255,255,255,0.96);
      box-shadow: 0 18px 55px rgba(0,0,0,0.20);
      max-width: 860px;
    }

    .kicker{
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 900;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-size: 12px;
      color: rgba(255,255,255,0.92);
    }

    .heroH1{
      margin: 8px 0 6px;
      font-family: var(--font-head);
      font-weight: 900;
      letter-spacing: -0.03em;
      line-height: 1.02;
      font-size: clamp(32px, 4vw, 54px);
      color: #fff;
    }

    .heroLead{
      margin: 0;
      color: rgba(231,228,209,0.92);
      font-size: 15.5px;
      line-height: 1.75;
      font-weight: 650;
      max-width: 86ch;
    }

    /* GRID */
    .grid2{
      margin-top: 14px;
      display: grid;
      grid-template-columns: 1.12fr 0.88fr;
      gap: 14px;
      align-items: stretch;
    }

    .pad{ padding: 14px; }

    .p{
      margin: 0;
      color: rgba(11,26,16,0.78);
      line-height: 1.78;
      font-size: 14.9px;
      font-weight: 650;
    }
    .p + .p{ margin-top: 10px; }

    .pillRow{
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .pill{
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 9px 12px;
      border-radius: 999px;
      border: 1px solid rgba(13,89,37,0.18);
      background: rgba(255,255,255,0.62);
      color: var(--ink);
      font-weight: 900;
      font-size: 13px;
      white-space: nowrap;
      box-shadow: 0 10px 26px rgba(13,89,37,0.10);
    }
    .pill strong{ color: var(--forest); font-weight: 900; }

    .list{
      margin: 10px 0 0;
      padding-left: 18px;
      color: rgba(11,26,16,0.78);
      line-height: 1.85;
      font-weight: 650;
      font-size: 14.6px;
    }
    .list li{ margin: 6px 0; }

    .noteBox{
      border-radius: 18px;
      border: 1px solid rgba(11,26,16,0.10);
      background: rgba(255,255,255,0.55);
      padding: 14px;
      margin-top: 12px;
    }
    .noteTitle{
      margin: 0 0 8px;
      font-family: var(--font-head);
      color: var(--forest);
      font-weight: 900;
      letter-spacing: -0.02em;
      font-size: 18px;
      line-height: 1.15;
    }
    .noteBox p{
      margin: 0;
      color: rgba(11,26,16,0.78);
      line-height: 1.75;
      font-weight: 650;
      font-size: 14.4px;
    }

    /* HORIZONTAL CAROUSEL */
    .carouselPad{ padding: 14px; }

    .hCarousel{
      border-radius: 18px;
      border: 1px solid rgba(11,26,16,0.10);
      background: rgba(255,255,255,0.55);
      overflow: hidden;
    }

    .hViewport{
      position: relative;
      overflow: hidden;
      background: rgba(0,0,0,0.08);
    }

    .hTrack{
      display: flex;
      width: 100%;
      transform: translateX(0);
      transition: transform 420ms ease;
      will-change: transform;
    }

    .hSlide{
      flex: 0 0 100%;
      position: relative;
      aspect-ratio: 16 / 9;
      margin: 0;
      padding: 0;
    }

    .hSlide img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transform: scale(1.01);
    }

    .hCap{
      position: absolute;
      left: 10px;
      right: 10px;
      bottom: 10px;
      padding: 9px 11px;
      border-radius: 14px;
      background: rgba(245,245,220,0.92);
      border: 1px solid rgba(13,89,37,0.16);
      color: #0b2b12;
      box-shadow: 0 14px 30px rgba(0,0,0,0.14);
      font-weight: 900;
      font-size: 13px;
      letter-spacing: -0.01em;
    }

    .hArrow{
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      height: 46px;
      width: 52px;
      border-radius: 16px;
      border: 1px solid rgba(245,245,220,0.45);
      background: rgba(11,26,16,0.30);
      color: rgba(231,228,209,0.96);
      box-shadow: 0 18px 55px rgba(0,0,0,0.20);
      cursor: pointer;
      user-select: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      line-height: 1;
      z-index: 3;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    .hArrow.prev{ left: 10px; }
    .hArrow.next{ right: 10px; }

    .hNav{
      border-top: 1px solid rgba(11,26,16,0.12);
      padding: 10px 12px;
      display: flex;
      justify-content: center;
    }

    .hDots{
      display: inline-flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: center;
    }

    .hDotBtn{
      appearance: none;
      border: 1px solid rgba(13,89,37,0.20);
      background: rgba(255,255,255,0.72);
      width: 10px;
      height: 10px;
      border-radius: 999px;
      cursor: pointer;
      padding: 0;
    }
    .hDotBtn.is-active{
      background: rgba(224,100,58,0.95);
      border-color: rgba(0,0,0,0.10);
      box-shadow: 0 10px 22px rgba(224,100,58,0.18);
      transform: scale(1.05);
    }

    /* CTA BAND */
    .ctaBand{
      margin-top: 14px;
      border-radius: var(--r);
      border: 1px solid rgba(11,26,16,0.12);
      background: rgba(245,245,220,0.82);
      box-shadow: var(--shadow);
      padding: 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      color: var(--ink);
    }

    .ctaBand h2{
      margin: 0 0 6px;
      font-family: var(--font-head);
      color: var(--forest);
      font-weight: 900;
      letter-spacing: -0.02em;
      font-size: 22px;
      line-height: 1.1;
    }

    .ctaBand p{
      margin: 0;
      color: rgba(11,26,16,0.72);
      font-weight: 650;
      line-height: 1.7;
      max-width: 86ch;
    }

    .ctaBtns{
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    /* MOBILE */
    @media (max-width: 900px){
      .wrap{ padding: 12px 14px 64px; }

      .heroMedia{ height: 280px; }
      .heroInner{ left: 12px; right: 12px; bottom: 12px; padding: 12px; max-width: none; }

      .grid2{ grid-template-columns: 1fr; }
      .hSlide{ aspect-ratio: 4 / 3; }
      .hArrow.prev{ left: 8px; }
      .hArrow.next{ right: 8px; }
    }
  </style>
</head>
<body>
  <div id="siteHeader"></div>
  <main class="wrap" aria-label="Pagina de Pululahua">
    <section class="topBand" aria-label="Navegacion de la pagina">
      <div class="crumbs" aria-label="Breadcrumb">
        <a href="/es/">Inicio</a>
        <span aria-hidden="true">›</span>
        <a href="/es/caracteristicas/">Caracteristicas</a>
        <span aria-hidden="true">›</span>
        <span>Pululahua</span>
      </div>
      <div class="quickActions" aria-label="Acciones rapidas">
        <a class="btn secondary" href="/es/caracteristicas/">Volver a Caracteristicas</a>
        <a class="btn primary" href="/booking/">Reserva tu estadia</a>
      </div>
    </section>
<!-- HERO -->
<section class="hero" aria-label="Pululahua hero">
  <div class="heroMedia" aria-label="Imagen principal">
    <img src="/assets/images/pages/features/choco/tcfr_features_choco_01.jpg" alt="Paisaje de Pululahua" loading="eager" decoding="async" />
    <div class="heroShade" aria-hidden="true"></div>
    <div class="heroInner" aria-label="Contenido del hero">
      <div class="kicker">Caldera ancestral • Miradores entre neblina</div>
      <h1 class="heroH1">Pululahua</h1>
      <p class="heroLead">
        Pululahua es una antigua caldera volcanica donde la nube y el sol cambian rapido, hay fincas dentro del crater,
        y el paisaje cuenta una historia de miles de anos.
      </p>
    </div>
  </div>
</section>

<!-- INFO GRID -->
<section class="grid2" aria-label="Informacion de Pululahua">
  <article class="card" aria-label="Historia volcanica">
    <div class="cardHead">
      <h2 class="cardTitle">Un volcan por dentro</h2>
      <p class="cardHint">Geologia, vida en la caldera y suelos fertiles</p>
    </div>
    <div class="pad">
      <p class="p">
        Pululahua es conocida por su enorme caldera, un crater que se formo tras actividad volcanica y colapso.
        Los suelos fertiles dentro del crater sostienen pequenas comunidades agricolas, por eso es una de las raras calderas habitadas del planeta.
      </p>
      <p class="p">
        El nombre "Pululahua" se asocia comunmente con significados kichwa vinculados a la neblina y al agua,
        lo que encaja con la niebla frecuente que cruza la reserva.
      </p>

      <div class="pillRow" aria-label="Datos rapidos">
        <span class="pill"><strong>Tipo:</strong> caldera volcanica</span>
        <span class="pill"><strong>Ambiente:</strong> miradores con neblina</span>
        <span class="pill"><strong>Suelos:</strong> naturalmente fertiles</span>
      </div>

      <div class="noteBox" aria-label="Nota para visitantes">
        <div class="noteTitle">Mejor momento</div>
        <p>
          Anda cuando las nubes se estan moviendo. Vas a ver como el crater aparece y desaparece, como si el paisaje respirara.
        </p>
      </div>
    </div>
  </article>

  <aside class="card" aria-label="Naturaleza y actividades">
    <div class="cardHead">
      <h2 class="cardTitle">Que podes hacer</h2>
      <p class="cardHint">Facil de visitar, dificil de olvidar</p>
    </div>
    <div class="pad">
      <p class="p">
        Pululahua es famosa por sus miradores, caminatas cortas y exploracion tranquila entre microclimas cambiantes.
        La reserva tambien alberga gran diversidad de plantas, incluyendo orquideas y bromelias, y ofrece buenas oportunidades para avistamiento de aves.
      </p>

      <ul class="list" aria-label="Actividades">
        <li><strong>Miradores:</strong> vistas panoramicas del crater y parcelas de cultivo</li>
        <li><strong>Caminatas:</strong> senderos hacia el interior de la caldera y por el borde</li>
        <li><strong>Avistamiento de aves:</strong> colibries y especies del bosque nublado</li>
        <li><strong>Fotografia:</strong> cielos dramaticos, neblina y crestas en capas</li>
      </ul>

      <div class="pillRow" aria-label="Vibra del viaje">
        <span class="pill"><strong>Vibra:</strong> tranquila y escenica</span>
        <span class="pill"><strong>Ideal para:</strong> fotos y caminatas</span>
        <span class="pill"><strong>Tip:</strong> lleva una chaqueta liviana</span>
      </div>

      <div class="noteBox" aria-label="Nota de conservacion">
        <div class="noteTitle">Respeta la reserva</div>
        <p>
          Quedate en los senderos, evita musica fuerte y llevate tu basura. Los ecosistemas con neblina son delicados y se recuperan lentamente.
        </p>
      </div>
    </div>
  </aside>
</section>

<!-- HORIZONTAL IMAGE CAROUSEL -->
<section class="card" style="margin-top:14px;" aria-label="Carrusel de fotos de Pululahua">
  <div class="cardHead">
    <h2 class="cardTitle">Vistas de Pululahua</h2>
    <p class="cardHint"></p>
  </div>

  <div class="carouselPad">
    <div class="hCarousel" aria-label="Carrusel horizontal de Pululahua">
      <div class="hViewport" id="puCarousel" data-autoplay-ms="2600" data-pause-after-interaction-ms="9000">
        <button class="hArrow prev" type="button" data-action="prev" aria-label="Foto anterior">‹</button>
        <button class="hArrow next" type="button" data-action="next" aria-label="Foto siguiente">›</button>

        <div class="hTrack" data-track>
          <figure class="hSlide" aria-label="Imagen 1 de Pululahua">
            <img src="/assets/images/pages/features/pululahua/tcfr_features_pululahua_92.jpg" alt="Pululahua desde el mirador" loading="lazy" decoding="async" />
            <figcaption class="hCap">La caldera desde el mirador</figcaption>
          </figure>
          <figure class="hSlide" aria-label="Imagen 2 de Pululahua">
            <img src="/assets/images/pages/features/pululahua/tcfr_features_pululahua_93.jpg" alt="Neblina en el borde de Pululahua" loading="lazy" decoding="async" />
            <figcaption class="hCap">La neblina cruzando el borde</figcaption>
          </figure>
          <figure class="hSlide" aria-label="Imagen 3 de Pululahua">
            <img src="/assets/images/pages/features/pululahua/tcfr_features_pululahua_94.jpg" alt="Fincas dentro de la caldera de Pululahua" loading="lazy" decoding="async" />
            <figcaption class="hCap">Fincas dentro del crater</figcaption>
          </figure>
          <figure class="hSlide" aria-label="Imagen 4 de Pululahua">
            <img src="/assets/images/pages/features/pululahua/tcfr_features_pululahua_95.jpg" alt="Vistas de senderos en Pululahua" loading="lazy" decoding="async" />
            <figcaption class="hCap">Senderos entre habitats cambiantes</figcaption>
          </figure>
          <figure class="hSlide" aria-label="Imagen 5 de Pululahua">
            <img src="/assets/images/pages/features/pululahua/tcfr_features_pululahua_96.jpg" alt="Hora dorada en Pululahua" loading="lazy" decoding="async" />
            <figcaption class="hCap">Hora dorada en las paredes del crater</figcaption>
          </figure>
        </div>
      </div>

      <div class="hNav" aria-label="Puntos del carrusel">
        <div class="hDots" data-dots aria-label="Elegir una foto"></div>
      </div>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="ctaBand" aria-label="Llamado a la accion">
  <div>
    <h2>Queres sumar Pululahua a tu estadia?</h2>
    <p>
      Contanos tu ritmo e intereses y te recomendamos la mejor hora, la ventana de clima y el mirador ideal para la experiencia que queres.
    </p>
  </div>
  <div class="ctaBtns" aria-label="Botones CTA">
    <a class="btn primary" href="/booking/">Reserva tu estadia</a>
    <a class="btn secondary" href="/contact/">Hacer una consulta</a>
    <a class="btn secondary" href="/es/caracteristicas/">Mas caracteristicas</a>
  </div>
</section>
  </main>
  <div id="siteFooter"></div>
  <script src="/assets/js/site.js?v=3"></script>
  <script>
    (function(){
      "use strict";

      var root = document.getElementById("puCarousel");
      if (!root) return;

      var track = root.querySelector("[data-track]");
      var dotsWrap = root.parentNode ? root.parentNode.querySelector("[data-dots]") : null;
      if (!track) return;

      var slides = track.children ? Array.prototype.slice.call(track.children) : [];
      if (!slides.length) return;

      var autoplayMs = Number(root.getAttribute("data-autoplay-ms") || "2600");
      var pauseAfterMs = Number(root.getAttribute("data-pause-after-interaction-ms") || "9000");

      var index = 0;
      var timer = null;
      var resumeTimer = null;
      var isPaused = false;

      function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

      function setTransform(){
        track.style.transform = "translateX(" + (-index * 100) + "%)";
      }

      function setActiveDot(){
        if (!dotsWrap) return;
        var btns = dotsWrap.querySelectorAll("button[data-dot]");
        for (var i = 0; i < btns.length; i++){
          btns[i].classList.toggle("is-active", Number(btns[i].getAttribute("data-dot")) === index);
        }
      }

      function goTo(i){
        index = clamp(i, 0, slides.length - 1);
        setTransform();
        setActiveDot();
      }

      function next(){
        var n = index + 1;
        if (n >= slides.length) n = 0;
        goTo(n);
      }

      function prev(){
        var p = index - 1;
        if (p < 0) p = slides.length - 1;
        goTo(p);
      }

      function clearTimers(){
        if (timer) { clearInterval(timer); timer = null; }
        if (resumeTimer) { clearTimeout(resumeTimer); resumeTimer = null; }
      }

      function startAutoplay(){
        clearTimers();
        if (autoplayMs < 1200) autoplayMs = 1200;
        timer = setInterval(function(){
          if (isPaused) return;
          next();
        }, autoplayMs);
      }

      function pauseTemporarily(){
        isPaused = true;
        if (resumeTimer) clearTimeout(resumeTimer);
        resumeTimer = setTimeout(function(){
          isPaused = false;
        }, pauseAfterMs);
      }

      function buildDots(){
        if (!dotsWrap) return;
        dotsWrap.innerHTML = "";
        for (var i = 0; i < slides.length; i++){
          var b = document.createElement("button");
          b.type = "button";
          b.className = "hDotBtn" + (i === 0 ? " is-active" : "");
          b.setAttribute("data-dot", String(i));
          b.setAttribute("aria-label", "Ir a la foto " + (i + 1));
          b.addEventListener("click", function(){
            var n = Number(this.getAttribute("data-dot") || "0");
            goTo(n);
            pauseTemporarily();
          });
          dotsWrap.appendChild(b);
        }
      }

      function bindArrows(){
        var prevBtn = root.querySelector('button[data-action="prev"]');
        var nextBtn = root.querySelector('button[data-action="next"]');

        if (prevBtn){
          prevBtn.addEventListener("click", function(){
            prev();
            pauseTemporarily();
          });
        }

        if (nextBtn){
          nextBtn.addEventListener("click", function(){
            next();
            pauseTemporarily();
          });
        }
      }

      function bindHoverPause(){
        root.addEventListener("mouseenter", function(){ isPaused = true; });
        root.addEventListener("mouseleave", function(){ isPaused = false; });
        root.addEventListener("focusin", function(){ isPaused = true; });
        root.addEventListener("focusout", function(){ isPaused = false; });
      }

      function bindTouchSwipe(){
        var startX = 0;
        var deltaX = 0;
        var isDown = false;

        function onDown(x){
          isDown = true;
          startX = x;
          deltaX = 0;
          pauseTemporarily();
        }

        function onMove(x){
          if (!isDown) return;
          deltaX = x - startX;
        }

        function onUp(){
          if (!isDown) return;
          isDown = false;

          var threshold = 38;
          if (Math.abs(deltaX) > threshold){
            if (deltaX < 0) next();
            else prev();
          }
          deltaX = 0;
        }

        root.addEventListener("touchstart", function(e){
          if (!e.touches || !e.touches.length) return;
          onDown(e.touches[0].clientX);
        }, { passive: true });

        root.addEventListener("touchmove", function(e){
          if (!e.touches || !e.touches.length) return;
          onMove(e.touches[0].clientX);
        }, { passive: true });

        root.addEventListener("touchend", function(){ onUp(); }, { passive: true });
        root.addEventListener("touchcancel", function(){ onUp(); }, { passive: true });
      }

      buildDots();
      bindArrows();
      bindHoverPause();
      bindTouchSwipe();

      goTo(0);
      startAutoplay();

      window.addEventListener("resize", function(){
        setTransform();
      }, { passive: true });
    })();
  </script>
</body>
</html>
