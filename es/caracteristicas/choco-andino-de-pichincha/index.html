<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Chocó Andino de Pichincha | The Cloud Forest Retreat</title>
  <meta name="description" content="Conoce la Reserva de Biosfera Chocó Andino de Pichincha (UNESCO), un hotspot de biodiversidad cerca de Quito con bosques nublados, especies endémicas y conservación liderada por comunidades. Planifica tu visita desde The Cloud Forest Retreat." />
  <meta name="robots" content="index,follow" />

  <!-- Canonical + hreflang (PRODUCTION URLs) -->
  <link rel="canonical" href="https://thecloudforestretreat.com/es/caracteristicas/choco-andino-de-pichincha/" />
  <link rel="alternate" hreflang="en" href="https://thecloudforestretreat.com/features/choco-andino-de-pichincha/" />
  <link rel="alternate" hreflang="es" href="https://thecloudforestretreat.com/es/caracteristicas/choco-andino-de-pichincha/" />
  <link rel="alternate" hreflang="x-default" href="https://thecloudforestretreat.com/features/choco-andino-de-pichincha/" />

  <!-- Open Graph (PRODUCTION URLs) -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="The Cloud Forest Retreat" />
  <meta property="og:title" content="Chocó Andino de Pichincha | The Cloud Forest Retreat" />
  <meta property="og:description" content="Una Reserva de Biosfera de la UNESCO cerca de Quito con bosques nublados, especies endémicas y conservación liderada por comunidades. Descubre qué hace especial al Chocó Andino." />
  <meta property="og:url" content="https://thecloudforestretreat.com/es/caracteristicas/choco-andino-de-pichincha/" />
  <meta property="og:image" content="https://thecloudforestretreat.com/og-tcfr.jpg" />
  <meta property="og:image:secure_url" content="https://thecloudforestretreat.com/og-tcfr.jpg" />
  <meta property="og:image:type" content="image/jpeg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="The Cloud Forest Retreat - Chocó Andino de Pichincha" />

  <!-- Twitter (PRODUCTION URLs) -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Chocó Andino de Pichincha | The Cloud Forest Retreat" />
  <meta name="twitter:description" content="Conoce la Reserva de Biosfera de la UNESCO cerca de Quito: bosques nublados, biodiversidad y conservación." />
  <meta name="twitter:image" content="https://thecloudforestretreat.com/og-tcfr.jpg" />

  <!-- Favicons (approved root paths) -->
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="theme-color" content="#0D5925" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;800;900&family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />

  <!-- Global / shared CSS -->
  <link rel="stylesheet" href="/assets/css/site.css" />
  <link rel="stylesheet" href="/assets/css/header.css" />
  <script src="/assets/js/head.js" defer></script>

  <style>
    :root{
      --max: 1120px;
      --r: 24px;
      --shadow: 0 18px 55px rgba(13,89,37,0.16);
      --line: rgba(11,26,16,0.12);

      --accent: #0D5925;
      --accent2: #E0643A;
      --glass: rgba(245,245,220,0.78);
      --glass2: rgba(245,245,220,0.62);
      --ink: #0b1a10;
      --muted: rgba(11,26,16,0.72);
    }

    *{ box-sizing: border-box; }
    body{ margin: 0; }

    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 18px 18px 76px;
    }

    .topBand{
      margin-top: 14px;
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      background: var(--glass);
      padding: 14px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
      color: var(--ink);
    }

    .crumbs{
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 800;
      font-size: 13px;
      color: rgba(11,26,16,0.75);
    }
    .crumbs a{ color: inherit; text-decoration: none; }
    .crumbs a:hover{ text-decoration: underline; text-underline-offset: 3px; }

    .quickActions{
      display: inline-flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .hero{
      margin-top: 14px;
      border-radius: var(--r);
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.22);
      box-shadow: var(--shadow);
      background: rgba(0,0,0,0.10);
      position: relative;
      height: 400px;
    }

    .hero img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transform: scale(1.01);
    }

    .heroShade{
      position: absolute;
      inset: 0;
      background:
        radial-gradient(900px 520px at 20% 18%, rgba(224,100,58,0.16), rgba(0,0,0,0) 60%),
        linear-gradient(180deg, rgba(0,0,0,0.10), rgba(0,0,0,0.50));
      pointer-events: none;
    }

    .heroBadge{
      position: absolute;
      left: 14px;
      bottom: 14px;
      right: 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.22);
      background: rgba(0,0,0,0.28);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(6px);
      padding: 14px;
      color: #fff;
      box-shadow: 0 18px 55px rgba(0,0,0,0.22);
    }

    .kicker{
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 900;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      font-size: 12px;
      color: rgba(255,255,255,0.92);
    }

    .heroH1{
      margin: 8px 0 6px;
      font-family: var(--font-head);
      font-weight: 900;
      letter-spacing: -0.03em;
      line-height: 1.02;
      font-size: clamp(30px, 3.6vw, 52px);
      color: #fff;
    }

    .heroLead{
      margin: 0;
      max-width: 80ch;
      font-weight: 650;
      line-height: 1.7;
      color: rgba(231,228,209,0.92);
      font-size: 15.5px;
    }

    .gridA{
      margin-top: 14px;
      display: grid;
      grid-template-columns: 1.15fr 0.85fr;
      gap: 14px;
      align-items: stretch;
    }

    .card{
      border: 1px solid var(--line);
      border-radius: var(--r);
      background: var(--glass2);
      box-shadow: var(--shadow);
      overflow: hidden;
      color: var(--ink);
      min-width: 0;
      position: relative;
    }

    .cardHead{
      padding: 14px 14px 0;
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      position: relative;
      z-index: 2;
    }

    .cardTitle{
      margin: 0;
      font-family: var(--font-head);
      color: var(--accent);
      letter-spacing: -0.02em;
      font-weight: 900;
      font-size: 20px;
    }

    .cardHint{
      margin: 0;
      color: rgba(11,26,16,0.68);
      font-weight: 800;
      font-size: 13px;
    }

    .pad{
      padding: 14px;
    }

    .p{
      margin: 0;
      color: rgba(11,26,16,0.78);
      line-height: 1.75;
      font-size: 14.8px;
      font-weight: 650;
    }

    .p + .p{ margin-top: 10px; }

    .pillRow{
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .pill{
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 9px 12px;
      border-radius: 999px;
      border: 1px solid rgba(13,89,37,0.18);
      background: rgba(255,255,255,0.62);
      color: var(--ink);
      font-weight: 900;
      font-size: 13px;
      white-space: nowrap;
    }
    .pill strong{ color: var(--accent); }

    .mapWrap{
      padding: 14px;
    }

    .mapFrame{
      border-radius: 18px;
      overflow: hidden;
      border: 1px solid rgba(11,26,16,0.10);
      background: rgba(255,255,255,0.55);
      position: relative;
    }

    .mapFrame img{
      width: 100%;
      height: auto;
      display: block;
    }

    .mapTag{
      position: absolute;
      left: 12px;
      bottom: 12px;
      right: 12px;
      border-radius: 14px;
      background: rgba(245,245,220,0.92);
      border: 1px solid rgba(13,89,37,0.16);
      padding: 10px 10px;
      font-weight: 900;
      color: var(--ink);
      font-size: 13px;
      box-shadow: 0 14px 30px rgba(0,0,0,0.12);
    }

    .gridB{
      margin-top: 14px;
      display: grid;
      grid-template-columns: 1.25fr 0.75fr;
      gap: 14px;
      align-items: start;
    }

    .miniCarouselPad{ padding: 14px; }

    .miniCarousel{
      border-radius: 18px;
      border: 1px solid rgba(11,26,16,0.10);
      background: rgba(255,255,255,0.55);
      overflow: hidden;
    }

    .miniViewport{
      position: relative;
      overflow: hidden;
      background: rgba(0,0,0,0.08);
    }

    .miniTrack{
      display: flex;
      width: 100%;
      transform: translateX(0);
      transition: transform 420ms ease;
      will-change: transform;
    }

    .miniSlide{
      flex: 0 0 100%;
      position: relative;
      aspect-ratio: 16 / 9;
      margin: 0;
      padding: 0;
    }

    .miniSlide img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .miniCap{
      position: absolute;
      left: 10px;
      right: 10px;
      bottom: 10px;
      padding: 9px 11px;
      border-radius: 14px;
      background: rgba(245,245,220,0.92);
      border: 1px solid rgba(13,89,37,0.16);
      color: #0b2b12;
      box-shadow: 0 14px 30px rgba(0,0,0,0.14);
      font-weight: 900;
      font-size: 13px;
      letter-spacing: -0.01em;
    }

    .miniArrow{
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      height: 44px;
      width: 48px;
      border-radius: 16px;
      border: 1px solid rgba(245,245,220,0.45);
      background: rgba(11,26,16,0.30);
      color: rgba(231,228,209,0.96);
      box-shadow: 0 18px 55px rgba(0,0,0,0.20);
      cursor: pointer;
      user-select: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      line-height: 1;
      z-index: 3;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    .miniArrow.prev{ left: 10px; }
    .miniArrow.next{ right: 10px; }

    .miniNav{
      border-top: 1px solid rgba(11,26,16,0.12);
      padding: 10px 12px;
      display: flex;
      justify-content: center;
    }

    .miniDots{
      display: inline-flex;
      gap: 8px;
      align-items: center;
    }

    .miniDotBtn{
      appearance: none;
      border: 1px solid rgba(13,89,37,0.20);
      background: rgba(255,255,255,0.72);
      width: 10px;
      height: 10px;
      border-radius: 999px;
      cursor: pointer;
      padding: 0;
    }
    .miniDotBtn.is-active{
      background: rgba(224,100,58,0.95);
      border-color: rgba(0,0,0,0.10);
      box-shadow: 0 10px 22px rgba(224,100,58,0.18);
      transform: scale(1.05);
    }

    .list{
      margin: 10px 0 0;
      padding-left: 18px;
      color: rgba(11,26,16,0.82);
      line-height: 1.85;
      font-weight: 650;
      font-size: 15px;
    }
    .list li{ margin: 6px 0; }

    .ctaBand{
      margin-top: 14px;
      border-radius: var(--r);
      border: 1px solid rgba(11,26,16,0.12);
      background: rgba(245,245,220,0.82);
      box-shadow: var(--shadow);
      padding: 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      color: var(--ink);
    }

    .ctaBand h2{
      margin: 0 0 6px;
      font-family: var(--font-head);
      color: var(--accent);
      font-weight: 900;
      letter-spacing: -0.02em;
      font-size: 22px;
      line-height: 1.1;
    }

    .ctaBand p{
      margin: 0;
      color: rgba(11,26,16,0.72);
      font-weight: 650;
      line-height: 1.7;
      max-width: 80ch;
    }

    .ctaBtns{
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    /* Citas sutiles (menos distractoras) */
    .cite{
      display: inline-block;
      vertical-align: super;
      font-size: 0.78em;
      line-height: 1;
      margin-left: 4px;
    }

    .cite a{
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 999px;
      text-decoration: none;
      border: 1px solid rgba(13,89,37,0.18);
      background: rgba(255,255,255,0.70);
      color: rgba(11,26,16,0.70);
      font-weight: 900;
    }

    .cite a:hover{
      background: rgba(224,100,58,0.12);
      border-color: rgba(224,100,58,0.28);
      color: rgba(11,26,16,0.85);
    }

    .sourcesPad{
      padding: 14px;
    }

    .sourcesList{
      margin: 0;
      padding-left: 18px;
      color: rgba(11,26,16,0.78);
      line-height: 1.75;
      font-weight: 650;
      font-size: 14.6px;
    }

    .sourcesList a{
      color: inherit;
      text-decoration: underline;
      text-underline-offset: 3px;
    }

    .sourcesNote{
      margin: 10px 0 0;
      color: rgba(11,26,16,0.62);
      font-weight: 650;
      font-size: 13px;
      line-height: 1.6;
    }

    @media (max-width: 900px){
      .wrap{ padding: 12px 14px 64px; }
      .hero{ height: 260px; }
      .gridA{ grid-template-columns: 1fr; }
      .gridB{ grid-template-columns: 1fr; }
      .miniSlide{ aspect-ratio: 4 / 3; }
      .miniArrow.prev{ left: 8px; }
      .miniArrow.next{ right: 8px; }
    }
  </style>
</head>
<body>
  <div id="siteHeader"></div>

  <main class="wrap" aria-label="Pagina de Choco Andino de Pichincha">
    <section class="topBand" aria-label="Navegacion y acciones de la pagina">
      <div class="crumbs" aria-label="Migas de pan">
        <a href="/es/">Inicio</a>
        <span aria-hidden="true">›</span>
        <a href="/es/caracteristicas/">Caracteristicas</a>
        <span aria-hidden="true">›</span>
        <span>Choco Andino de Pichincha</span>
      </div>
      <div class="quickActions" aria-label="Acciones rapidas">
        <a class="btn secondary" href="/es/caracteristicas/">Todas las caracteristicas</a>
        <a class="btn primary" href="/booking/">Reserva tu estadia</a>
      </div>
    </section>

    <section class="hero" aria-label="Hero">
      <img src="/assets/images/pages/features/choco/tcfr_features_choco_hero.jpg" alt="Paisaje de bosque nublado cerca de The Cloud Forest Retreat" loading="eager" decoding="async" />
      <div class="heroShade" aria-hidden="true"></div>
      <div class="heroBadge" aria-label="Titulo e introduccion">
        <div class="kicker">Reserva de Biosfera UNESCO • Bosques nublados • Cerca de Quito</div>
        <h1 class="heroH1">Choco Andino de Pichincha</h1>
        <p class="heroLead">
          Un corredor vivo de bosque nublado y ecosistemas de montana, donde el canto de las aves, las orquideas y la neblina marcan el ritmo del dia.
          Esta es la region natural que rodea Mindo y hace que tu estadia se sienta tan salvaje, vibrante y llena de vida.
        </p>
      </div>
    </section>

    <section class="gridA" aria-label="Mapa y resumen">
      <article class="card" aria-label="Tarjeta de mapa">
        <div class="cardHead">
          <h2 class="cardTitle">Donde estas dentro de la Reserva de Biosfera</h2>
          <p class="cardHint">Vista general del mapa</p>
        </div>
        <div class="mapWrap">
          <div class="mapFrame" aria-label="Mapa del Choco Andino">
            <img src="/assets/images/pages/features/tcfr_images_choco_map.jpg" alt="Mapa de la Reserva de Biosfera Choco Andino de Pichincha" loading="lazy" decoding="async" />
            <div class="mapTag">Choco Andino de Pichincha</div>
          </div>
        </div>
      </article>

      <aside class="card" aria-label="Por que importa">
        <div class="cardHead">
          <h2 class="cardTitle">Por que es importante</h2>
          <p class="cardHint">Biodiversidad + conservacion</p>
        </div>
        <div class="pad">
          <p class="p">
            La Reserva de Biosfera Choco Andino de Pichincha fue reconocida por la UNESCO en 2018 y abarca 286.806 hectareas.
            <span class="cite"><a href="#src-1" title="Fuente: UNESCO - Choco Andino de Pichincha (MAB)" aria-label="Fuente 1">1</a></span>
            Se extiende desde bosques de estribaciones bajas hasta paisajes altoandinos (aprox. 360 m a 4.480 m), creando una gran variedad de habitats en una sola region.
            <span class="cite"><a href="#src-1" title="Fuente: UNESCO - Choco Andino de Pichincha (MAB)" aria-label="Fuente 1">1</a></span>
          </p>
          <p class="p">
            Esa diversidad de habitats explica por que la zona es reconocida por su biodiversidad y endemismo. La UNESCO destaca miles de especies de plantas y una fauna muy rica, incluyendo mamiferos, reptiles, aves y anfibios.
            <span class="cite"><a href="#src-1" title="Fuente: UNESCO - Choco Andino de Pichincha (MAB)" aria-label="Fuente 1">1</a></span>
          </p>

          <div class="pillRow" aria-label="Datos rapidos">
            <span class="pill"><strong>UNESCO:</strong> red MAB</span>
            <span class="pill"><strong>Ano:</strong> 2018</span>
            <span class="pill"><strong>Area:</strong> 286.806 ha</span>
            <span class="pill"><strong>Rango:</strong> 360 m a 4.480 m</span>
          </div>

          <div class="pillRow" aria-label="Experiencias sugeridas">
            <span class="pill"><strong>Ideal para:</strong> avistamiento de aves</span>
            <span class="pill"><strong>Ideal para:</strong> cascadas</span>
            <span class="pill"><strong>Ideal para:</strong> caminatas en bosque nublado</span>
          </div>
        </div>
      </aside>
    </section>

    <section class="gridB" aria-label="Carrusel y como vivirlo">
      <article class="card" aria-label="Carrusel de fotos">
        <div class="cardHead">
          <h2 class="cardTitle">Asi se ve</h2>
          <p class="cardHint"></p>
        </div>

        <div class="miniCarouselPad">
          <div class="miniCarousel" aria-label="Mini carrusel del Choco Andino">
            <div class="miniViewport" id="caCarousel" data-autoplay-ms="2800" data-pause-after-interaction-ms="9000">
              <button class="miniArrow prev" type="button" data-action="prev" aria-label="Foto anterior">‹</button>
              <button class="miniArrow next" type="button" data-action="next" aria-label="Foto siguiente">›</button>

              <div class="miniTrack" data-track>
                <figure class="miniSlide" aria-label="Imagen del carrusel 1">
                  <img src="/assets/images/pages/features/choco/tcfr_features_choco_04.jpg" alt="Copa del bosque nublado y neblina" loading="lazy" decoding="async" />
                  <figcaption class="miniCap">Mananas de bosque nublado</figcaption>
                </figure>

                <figure class="miniSlide" aria-label="Imagen del carrusel 2">
                  <img src="/assets/images/pages/features/choco/tcfr_features_choco_03.jpg" alt="Sendero hacia una cascada en la region" loading="lazy" decoding="async" />
                  <figcaption class="miniCap">Senderos a cascadas escondidas</figcaption>
                </figure>

                <figure class="miniSlide" aria-label="Imagen del carrusel 3">
                  <img src="/assets/images/pages/features/choco/tcfr_features_choco_02.jpg" alt="Mirador para avistamiento de aves" loading="lazy" decoding="async" />
                  <figcaption class="miniCap">Miradores para avistar aves</figcaption>
                </figure>
              </div>
            </div>

            <div class="miniNav" aria-label="Puntos del carrusel">
              <div class="miniDots" data-dots aria-label="Elegir una foto"></div>
            </div>
          </div>
        </div>
      </article>

      <aside class="card" aria-label="Como vivirlo">
        <div class="cardHead">
          <h2 class="cardTitle">Como vivirlo</h2>
          <p class="cardHint">Guia simple para huespedes</p>
        </div>
        <div class="pad">
          <p class="p">
            Piensa en el Choco Andino como una gran sala al aire libre: cada curva del camino puede revelar un nuevo microclima, otro grupo de aves y un sendero distinto.
            Las mejores experiencias aqui son lentas y sensoriales.
          </p>

          <ul class="list" aria-label="Ideas para la visita">
            <li>Empieza temprano para ver aves y aprovechar la luz suave.</li>
            <li>Planifica caminatas cortas con pausas en cascadas.</li>
            <li>Lleva una capa liviana para la lluvia. El clima del bosque nublado cambia rapido.</li>
            <li>Apoya a guias locales y proyectos comunitarios: es parte de lo que hace funcionar una reserva de biosfera.</li>
          </ul>

          <div class="pillRow" aria-label="Consejos rapidos">
            <span class="pill"><strong>Tip:</strong> pidanos una ruta</span>
            <span class="pill"><strong>Tip:</strong> lleva binoculares</span>
            <span class="pill"><strong>Tip:</strong> zapatos impermeables</span>
          </div>
        </div>
      </aside>
    </section>

    <section class="card" id="sources" aria-label="Fuentes">
      <div class="cardHead">
        <h2 class="cardTitle">Fuentes</h2>
        <p class="cardHint">Para los datos clave de arriba</p>
      </div>
      <div class="sourcesPad">
        <ol class="sourcesList">
          <li id="src-1">
            UNESCO - Programa sobre el Hombre y la Biosfera (MAB): Choco Andino de Pichincha.
            <a href="https://www.unesco.org/en/mab/choco-andino-de-pichincha" target="_blank" rel="noopener">Ver fuente</a>
          </li>
        </ol>
        <p class="sourcesNote">
          Nota: las citas se muestran como numeros pequenos para mantener una lectura limpia. Toca un numero para ir a las fuentes.
        </p>
      </div>
    </section>

    <section class="ctaBand" aria-label="Llamado a la accion">
      <div>
        <h2>Haz que tu estadia sea parte del paisaje</h2>
        <p>
          Cuando te hospedas en The Cloud Forest Retreat, ya estas dentro de la historia mas amplia del Choco Andino.
          Quieres ayuda para planear un dia de cascadas, avistamiento de aves o miradores? Escribenos y te recomendamos una ruta simple.
        </p>
      </div>
      <div class="ctaBtns" aria-label="Botones de llamada a la accion">
        <a class="btn primary" href="/booking/">Reserva tu estadia</a>
        <a class="btn secondary" href="/es/contacto/">Haz una pregunta</a>
        <a class="btn secondary" href="/es/caracteristicas/">Explorar caracteristicas</a>
      </div>
    </section>
  </main>

  <div id="siteFooter"></div>
  <script src="/assets/js/site.js?v=3"></script>

  <script>
    (function(){
      "use strict";

      var root = document.getElementById("caCarousel");
      if (!root) return;

      var track = root.querySelector("[data-track]");
      var dotsWrap = root.parentNode ? root.parentNode.querySelector("[data-dots]") : null;
      if (!track) return;

      var slides = track.children ? Array.prototype.slice.call(track.children) : [];
      if (!slides.length) return;

      var autoplayMs = Number(root.getAttribute("data-autoplay-ms") || "2800");
      var pauseAfterMs = Number(root.getAttribute("data-pause-after-interaction-ms") || "9000");

      var index = 0;
      var timer = null;
      var resumeTimer = null;
      var isPaused = false;

      function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

      function setTransform(){
        track.style.transform = "translateX(" + (-index * 100) + "%)";
      }

      function setActiveDot(){
        if (!dotsWrap) return;
        var btns = dotsWrap.querySelectorAll("button[data-dot]");
        for (var i = 0; i < btns.length; i++){
          btns[i].classList.toggle("is-active", Number(btns[i].getAttribute("data-dot")) === index);
        }
      }

      function goTo(i){
        index = clamp(i, 0, slides.length - 1);
        setTransform();
        setActiveDot();
      }

      function next(){
        var n = index + 1;
        if (n >= slides.length) n = 0;
        goTo(n);
      }

      function prev(){
        var p = index - 1;
        if (p < 0) p = slides.length - 1;
        goTo(p);
      }

      function clearTimers(){
        if (timer) { clearInterval(timer); timer = null; }
        if (resumeTimer) { clearTimeout(resumeTimer); resumeTimer = null; }
      }

      function startAutoplay(){
        clearTimers();
        if (autoplayMs < 1200) autoplayMs = 1200;
        timer = setInterval(function(){
          if (isPaused) return;
          next();
        }, autoplayMs);
      }

      function pauseTemporarily(){
        isPaused = true;
        if (resumeTimer) clearTimeout(resumeTimer);
        resumeTimer = setTimeout(function(){
          isPaused = false;
        }, pauseAfterMs);
      }

      function buildDots(){
        if (!dotsWrap) return;
        dotsWrap.innerHTML = "";
        for (var i = 0; i < slides.length; i++){
          var b = document.createElement("button");
          b.type = "button";
          b.className = "miniDotBtn" + (i === 0 ? " is-active" : "");
          b.setAttribute("data-dot", String(i));
          b.setAttribute("aria-label", "Ir a la foto " + (i + 1));
          b.addEventListener("click", function(){
            var n = Number(this.getAttribute("data-dot") || "0");
            goTo(n);
            pauseTemporarily();
          });
          dotsWrap.appendChild(b);
        }
      }

      function bindArrows(){
        var prevBtn = root.querySelector('button[data-action="prev"]');
        var nextBtn = root.querySelector('button[data-action="next"]');

        if (prevBtn){
          prevBtn.addEventListener("click", function(){
            prev();
            pauseTemporarily();
          });
        }

        if (nextBtn){
          nextBtn.addEventListener("click", function(){
            next();
            pauseTemporarily();
          });
        }
      }

      function bindHoverPause(){
        root.addEventListener("mouseenter", function(){ isPaused = true; });
        root.addEventListener("mouseleave", function(){ isPaused = false; });
        root.addEventListener("focusin", function(){ isPaused = true; });
        root.addEventListener("focusout", function(){ isPaused = false; });
      }

      function bindTouchSwipe(){
        var startX = 0;
        var deltaX = 0;
        var isDown = false;

        function onDown(x){
          isDown = true;
          startX = x;
          deltaX = 0;
          pauseTemporarily();
        }

        function onMove(x){
          if (!isDown) return;
          deltaX = x - startX;
        }

        function onUp(){
          if (!isDown) return;
          isDown = false;

          var threshold = 38;
          if (Math.abs(deltaX) > threshold){
            if (deltaX < 0) next();
            else prev();
          }
          deltaX = 0;
        }

        root.addEventListener("touchstart", function(e){
          if (!e.touches || !e.touches.length) return;
          onDown(e.touches[0].clientX);
        }, { passive: true });

        root.addEventListener("touchmove", function(e){
          if (!e.touches || !e.touches.length) return;
          onMove(e.touches[0].clientX);
        }, { passive: true });

        root.addEventListener("touchend", function(){ onUp(); }, { passive: true });
        root.addEventListener("touchcancel", function(){ onUp(); }, { passive: true });
      }

      buildDots();
      bindArrows();
      bindHoverPause();
      bindTouchSwipe();

      goTo(0);
      startAutoplay();

      window.addEventListener("resize", function(){
        setTransform();
      }, { passive: true });
    })();
  </script>
</body>
</html>
